# 模型一：算法设计（最新版）

**版本**：3.0  
**日期**：2026-01-30  
**目标**：在公开评分规则下，重建可行粉丝票区间，并以概率方式审计“人气偏离”。

---

## 1. 问题定义与度量
为避免逻辑循环，本模型将评估维度拆分为两层：

- **规则一致性（硬约束）**：任何有效样本必须复现实测淘汰结果。
- **人气偏离（审计指标）**：在规则一致的样本中，淘汰者是否并非最低粉丝票。

数学表达：

\[
\text{Outcome}_{\text{sim}} \equiv \text{Outcome}_{\text{obs}}
\]

\[
\text{IsWrongful} \iff V_{\text{fan, elim}} > \min_i V_{\text{fan, i}}
\]

---

## 2. 输入与输出
**输入**：
- 赛季与周次的评委分数/排名、淘汰结果、赛制规则。  

**输出**：
- 每周粉丝票区间 \([L_i, U_i]\) 与点估计。  
- 约束一致性通过的蒙特卡洛样本。  
- 人气偏离概率 \(P(\text{Wrongful})\) 及置信区间。  

---

## 3. 算法结构
### 3.1 层 1：数据工程与活跃集
- 统一选手 ID、赛季周次、淘汰类型。
- 构建每周活跃集与淘汰/生还关系。

### 3.2 层 2：双核反演
- **百分制赛季（S3–S27）**：线性规划（LP）反演粉丝票区间。
- **排名制赛季（S1–S2, S28+）**：约束规划/混合整数求解粉丝排名。

输出：每周每位选手的可行区间 \([L_i, U_i]\)。

### 3.3 层 3：约束一致性采样（拒绝采样）
在区间内提出候选样本，仅保留能复现实测淘汰的样本：

```
for sample in proposal(intervals):
    if simulated_elimination(sample) != observed_elimination:
        reject
    else:
        accept
```

然后在通过样本上统计人气偏离概率。

---

## 4. 规则一致性判定
- **百分制**：合成分数最低者必须为淘汰者。
- **评委拯救赛季**：淘汰者需处于“bottom-two”集合。

---

## 5. 可选正则（保守估计）
为处理排名制区间退化问题，可对区间做轻微收缩：

- **用途**：敏感性分析、保守估计。
- **默认**：主结果不启用。

---

## 6. 复杂度与稳定性
- LP：单周求解时间 < 0.1 秒。
- 拒绝采样：通过率取决于约束强度，可用网格采样补充。

---

## 7. 产出文件
- `outputs/mc_robustness_results.csv`
- `outputs/mc_summary_statistics.tex`
- `figures/*.pdf`

---

## 8. 关键脚本
- `scripts/run_mc_analysis.py`：主分析
- `scripts/visualize_mc_results.py`：可视化
- `scripts/run_full_pipeline.py`：一键流程
